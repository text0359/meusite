<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>√Årea do Filme</title>
  <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body {
      background: linear-gradient(to right, #d88adb, #8b7ff6);
      overflow: hidden;
    }

    .top-bar {
      background: #fff;
      padding: 10px 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: bold;
      border-bottom: 3px solid #ff6bb2;
    }

    .id-label {
      flex: 1;
      color: #ff2691;
    }

    .share-btn,
    .menu-btn {
      background: transparent;
      border: none;
      font-size: 20px;
      cursor: pointer;
    }

    .status {
      display: flex;
      align-items: center;
      gap: 5px;
      font-weight: bold;
      color: #fff;
      background: #ccc;
      padding: 5px 10px;
      border-radius: 20px;
    }

    .status.online {
      background: #2ecc71;
    }

    .status.offline {
      background: #e74c3c;
    }

    .status .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: currentColor;
    }

    .film-area {
      display: flex;
      height: calc(100vh - 60px);
      position: relative;
    }

    .video-container {
      flex: 1;
      background: black;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 0 20px 20px 0;
      overflow: hidden;
      position: relative; /* Necess√°rio para posicionar os emojis */
    }

    .video-container video {
      width: 100%;
      height: 100%;
      object-fit: contain;
      z-index: 1; /* Garante que o v√≠deo fique por baixo dos emojis */
    }

    /* Container para os emojis animados */
    .emoji-animation-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden; /* Garante que emojis saiam da tela */
        pointer-events: none; /* Permite interagir com o v√≠deo por tr√°s dos emojis */
        z-index: 2; /* Acima do v√≠deo */
    }

    .animated-emoji {
        position: absolute;
        font-size: 3em; /* Tamanho dos emojis */
        opacity: 0;
        animation: floatUpFadeOut 3s ease-out forwards;
        transform: translate(-50%, -50%); /* Centraliza o emoji em seu ponto de origem */
        will-change: transform, opacity; /* Otimiza√ß√£o para anima√ß√£o */
    }

    @keyframes floatUpFadeOut {
        0% {
            opacity: 1;
            transform: translateY(0) scale(1);
            filter: blur(0);
        }
        50% {
            opacity: 1;
        }
        100% {
            opacity: 0;
            transform: translateY(-200px) scale(1.5); /* Sobe e cresce um pouco */
            filter: blur(5px); /* Efeito de desfoque ao sumir */
        }
    }


    .side-bar {
      width: 60px;
      background: #ff6bb2;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px 0;
      gap: 10px;
      border-top-right-radius: 20px;
      border-bottom-right-radius: 20px;
    }

    .side-bar button {
      background: #fff;
      border: none;
      border-radius: 50%;
      padding: 8px;
      font-size: 20px;
      cursor: pointer;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s ease-in-out, background 0.2s ease-in-out;
    }
    .side-bar button:hover {
        transform: scale(1.1);
        background: #f0f0f0;
    }

    .main-menu {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(to bottom, #ff7fb8, #e79ac2);
      border-radius: 20px;
      padding: 20px;
      width: 280px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 0 20px #c42b83;
      color: white;
      display: none;
      z-index: 1000;
    }

    .main-menu.show {
      display: block;
    }

    .main-menu h2 {
      font-size: 1.4rem;
      margin-bottom: 10px;
      text-align: center;
    }
    .main-menu h3 {
        font-size: 1.2rem;
        margin-top: 20px;
        margin-bottom: 8px;
        text-align: center;
        border-bottom: 1px solid rgba(255,255,255,0.5);
        padding-bottom: 5px;
    }

    .close-btn {
      position: absolute;
      right: 15px;
      top: 15px;
      background: transparent;
      border: none;
      font-size: 20px;
      color: white;
      cursor: pointer;
    }

    .main-menu input[type="text"],
    .main-menu input[type="file"] {
      width: 100%;
      padding: 10px;
      margin: 6px 0;
      border-radius: 8px;
      border: none;
      font-size: 13px;
      background-color: rgba(255,255,255,0.8);
      color: #333;
    }

    .btn {
      width: 100%;
      padding: 12px;
      margin: 6px 0;
      border: none;
      border-radius: 20px;
      font-weight: bold;
      color: white;
      font-size: 14px;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s, box-shadow 0.2s;
    }

    .btn.purple {
      background: linear-gradient(to right, #7f00ff, #a333ff);
    }

    .btn.pink {
      background: #ff4488;
    }
    .main-menu .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    .scene-select {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      text-align: center;
    }

    .scene-select select {
      padding: 8px;
      border-radius: 8px;
      border: none;
      margin-top: 5px;
      width: 100%;
      background-color: rgba(255,255,255,0.8);
      color: #333;
    }

    /* Estilo para o pop-up de ID */
    .share-popup {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(to bottom, #ff7fb8, #e79ac2);
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 0 25px rgba(0,0,0,0.5);
        z-index: 1001;
        text-align: center;
        color: white;
        width: 300px;
        max-width: 90%;
    }

    .share-popup.show {
        display: block;
    }

    .share-popup h3 {
        margin-bottom: 15px;
        font-size: 1.5rem;
    }

    .share-popup input[type="text"] {
        width: calc(100% - 20px);
        padding: 10px;
        margin-bottom: 15px;
        border-radius: 8px;
        border: none;
        font-size: 1rem;
        text-align: center;
        background-color: rgba(255,255,255,0.8);
        color: #ff2691;
        font-weight: bold;
    }

    .share-popup .copy-btn {
        background: #a333ff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 20px;
        cursor: pointer;
        font-weight: bold;
        transition: background 0.3s;
    }

    .share-popup .copy-btn:hover {
        background: #7f00ff;
    }

    /* Estilo da biblioteca de filmes */
    #movieLibrary {
        margin-top: 10px;
        max-height: 200px;
        overflow-y: auto;
        background-color: rgba(255,255,255,0.2);
        padding: 10px;
        border-radius: 10px;
        border: 1px solid rgba(255,255,255,0.4);
    }
    #movieLibrary p {
        text-align: center;
        color: rgba(255,255,255,0.7);
        font-style: italic;
    }
    #movieLibrary div {
        padding: 8px;
        cursor: pointer;
        border-bottom: 1px solid rgba(255,255,255,0.1);
        color: white;
        transition: background-color 0.2s;
    }
    #movieLibrary div:hover {
        background-color: rgba(255,255,255,0.3);
    }
    #movieLibrary div:last-child {
        border-bottom: none;
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <span class="id-label">ID: Aguardando...</span>
    <button class="share-btn">üîó</button>
    <div class="status offline" id="peerStatus">
      <span id="statusText">OFF</span>
      <div class="dot"></div>
    </div>
    <button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>
  </div>

  <div class="film-area">
    <div class="video-container">
      <video id="videoPlayer" controls></video>
      <div class="emoji-animation-container" id="emojiContainer"></div>
    </div>
    <div class="side-bar">
      <button id="playBtn">‚ñ∂Ô∏è</button>
      <button class="emoji-btn" data-emoji="üòÇ">üòÇ</button>
      <button class="emoji-btn" data-emoji="üò¥">üò¥</button>
      <button class="emoji-btn" data-emoji="üò≠">üò≠</button>
      <button class="emoji-btn" data-emoji="üò±">üò±</button>
      <button class="emoji-btn" data-emoji="üòç">üòç</button>
      <button class="emoji-btn" data-emoji="ü•∫">ü•∫</button>
      <button class="emoji-btn" data-emoji="üòÖ">üòÖ</button>
    </div>
  </div>

  <div class="share-popup" id="shareIdPopup">
      <button class="close-btn" onclick="toggleSharePopup()">‚úñ</button>
      <h3>Seu ID da Sess√£o</h3>
      <input type="text" id="myPeerIdDisplay" readonly>
      <button class="copy-btn" onclick="copyMyPeerId()">Copiar ID</button>
  </div>

  <div class="main-menu" id="mainMenu">
    <h2>Menu Principal</h2>
    <button class="close-btn" onclick="toggleMenu()">‚úñ</button>

    <h3>Conex√£o</h3>
    <label for="friendId">ID do amigo:</label>
    <input type="text" id="friendId" placeholder="Insira o ID do amigo">

    <button class="btn purple" id="connectFriendBtn">Conectar Amigo</button>
    <button class="btn purple" id="retryConnectBtn">Tentar Novamente</button>

    <h3>Controle de V√≠deo</h3>
    <input type="file" id="videoInput" accept="video/*">
    <button class="btn pink" id="loadStreamVideoBtn">Carregar & Transmitir V√≠deo</button>
    <button class="btn pink" id="syncPlayBtn">Sincronizar Play</button>
    <button class="btn pink" id="syncPauseBtn">Sincronizar Pausar</button>

    <h3>Biblioteca de Filmes</h3>
    <div id="movieLibrary">
        <p>Nenhum filme adicionado ainda.</p>
    </div>
    <button class="btn pink" id="addMovieToLibraryBtn" style="margin-top: 10px;">Adicionar Filme √† Biblioteca</button>

    <h3>Cenas R√°pidas</h3>
    <div class="scene-select">
      <label for="sceneSelector">Cenas</label>
      <select id="sceneSelector">
        <option value="">Selecionar Cena</option>
      </select>
      <button class="btn pink" style="margin-top: 5px;" id="addCurrentTimeAsSceneBtn">Salvar Cena Atual</button>
    </div>
  </div>

  <script src="cinema.js"></script>
</body>
</html>
